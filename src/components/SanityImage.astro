---
import imageUrlBuilder from "@sanity/image-url";
import {useSanityClient} from "@sanity/astro"

const client = useSanityClient()
const builder = imageUrlBuilder(client)

interface props {
    node: string,
    classes: string,
    width: number
}

const { 
    node, 
    width = 960, 
    classes } = Astro.props

// See https://www.sanity.io/docs/presenting-images for general documentation on
// presenting images, and https://www.sanity.io/docs/image-url for specifics on
// this builder API
const image = builder
    .image(node)
    .width(width)
    .fit('max')
    .auto('format')
---

<img 
    src={image.url()} alt={node.alt || ""} 
    title={node.alt}
    class={classes} />